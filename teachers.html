<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portail Alumni - ENSTP Excellence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Outfit:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --enstp-gold: #ffb606;
            --enstp-dark: #0f172a;
            --enstp-pink: #f472b6;
        }
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            scroll-behavior: smooth;
            overflow-x: hidden;
        }
        h1, h2, h3, h4, .font-outfit { font-family: 'Outfit', sans-serif; }
        
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: var(--enstp-gold); border-radius: 10px; }
        
        .header-shadow { box-shadow: 0 4px 30px rgba(0, 0, 0, 0.03); }

        /* Animations */
        @keyframes fade-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-up { animation: fade-up 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }

        @keyframes ken-burns {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }
        .ken-burns { animation: ken-burns 15s ease-out infinite alternate; }

        /* Carousel Styles */
        .testimonial-track {
            display: flex;
            transition: transform 1.2s cubic-bezier(0.7, 0, 0.3, 1);
        }
        .testimonial-slide {
            flex-shrink: 0;
            width: 100%;
            height: 100%;
        }

        /* Modal Bottom Sheet Mobile */
        @media (max-width: 768px) {
            .modal-content-wrapper {
                border-radius: 2rem 2rem 0 0 !important;
                margin-top: auto !important;
                height: 94vh !important;
                max-height: 94vh !important;
                transform: translateY(0);
                animation: slide-up 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            }
        }
        @keyframes slide-up {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .btn-premium {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .btn-premium::after {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: 0.5s;
        }
        .btn-premium:hover::after { left: 100%; }

        /* Scrollable container for long testimonials */
        .testimonial-body-scroll {
            max-height: 200px;
            overflow-y: auto;
        }
        @media (min-width: 768px) {
            .testimonial-body-scroll {
                max-height: none;
                overflow-y: visible;
            }
        }
    </style>
    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@19.0.0",
    "react-dom/client": "https://esm.sh/react-dom@19.0.0/client",
    "htm": "https://esm.sh/htm@3.1.1",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect, useMemo } from 'react';
        import ReactDOM from 'react-dom/client';
        import htm from 'htm';

        const html = htm.bind(React.createElement);

        const ALUMNI_API = "https://mcb.Alumnica-app.com/api/memoires/universites/ecole-des-travaux/users-stats/";
        const TESTIMONIALS_API = "https://mcb.Alumnica-app.com/api/universites/universities/ecole-des-travaux/oldstudent/";

        const App = () => {
            const [alumni, setAlumni] = useState([]);
            const [testimonials, setTestimonials] = useState([]);
            const [loading, setLoading] = useState(true);
            const [searchTerm, setSearchTerm] = useState('');
            const [selectedAlumnus, setSelectedAlumnus] = useState(null);
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [carouselIndex, setCarouselIndex] = useState(0);

            useEffect(() => {
                const init = async () => {
                    setLoading(true);
                    try {
                        const [alumniRes, testRes] = await Promise.all([
                            fetch(ALUMNI_API).then(r => r.json()),
                            fetch(TESTIMONIALS_API).then(r => r.json())
                        ]);
                        setAlumni(alumniRes.utilisateurs_stats || []);
                        setTestimonials(testRes || []);
                    } catch (err) {
                        console.error('Fetch error:', err);
                    } finally {
                        setLoading(false);
                    }
                };
                init();
            }, []);

            useEffect(() => {
                if (testimonials.length <= 1) return;
                const interval = setInterval(() => {
                    setCarouselIndex(prev => (prev + 1) % testimonials.length);
                }, 10000);
                return () => clearInterval(interval);
            }, [testimonials]);

            const filteredAlumni = useMemo(() => {
                return alumni.filter(item => {
                    const fullName = `${item.utilisateur.prenom} ${item.utilisateur.nom}`.toLowerCase();
                    return fullName.includes(searchTerm.toLowerCase()) || 
                           item.utilisateur.email.toLowerCase().includes(searchTerm.toLowerCase());
                });
            }, [alumni, searchTerm]);

            const globalStats = useMemo(() => ({
                totalAlumni: alumni.length,
                totalWorks: alumni.reduce((acc, curr) => acc + (curr.statistiques_globales?.total_memoires_lies || 0), 0),
                totalDownloads: alumni.reduce((acc, curr) => acc + (curr.statistiques_globales?.total_telechargements || 0), 0)
            }), [alumni]);

            return html`
                <div className="min-h-screen flex flex-col bg-slate-50">
                    <!-- Navigation -->
                    <header className="fixed top-0 left-0 w-full h-[70px] md:h-[90px] bg-white z-[1000] header-shadow flex items-center justify-between px-4 md:px-12">
                        <div className="flex items-center gap-6 md:gap-10">
                            <div className="logo-container h-[40px] md:h-[50px]">
                                <img src="images/logo.png" alt="ENSTP" className="h-full object-contain" />
                            </div>
                            <nav className="hidden xl:block">
                                <ul className="flex items-center gap-8 font-bold text-[12px] uppercase tracking-wider text-slate-600">
                                    <li><a href="index.html" className="hover:text-[#ffb606] transition-colors">Accueil</a></li>
                                    <li><a href="#" className="hover:text-[#ffb606] transition-colors">Formations</a></li>
                                    <li><a href="#" className="hover:text-[#ffb606] transition-colors">Enseignants</a></li>
                                    <li><a href="#" className="text-[#ffb606]">Mémoires</a></li>
                                    <li><a href="#" className="hover:text-[#ffb606] transition-colors">Actualités</a></li>
                                    <li><a href="#" className="hover:text-[#ffb606] transition-colors">Contact</a></li>
                                </ul>
                            </nav>
                        </div>
                        <div className="flex items-center gap-4">
                            <div className="hidden lg:flex items-center gap-3 h-[90px] bg-[#ffb606] px-8 text-white font-bold text-sm">
                                <i className="fa-solid fa-phone"></i>
                                <span>(237) 222 23 09 44</span>
                            </div>
                            <button onClick=${() => setIsMenuOpen(true)} className="xl:hidden text-[#ffb606] text-2xl p-2 focus:outline-none">
                                <i className="fa-solid fa-bars-staggered"></i>
                            </button>
                        </div>
                    </header>

                    ${isMenuOpen && html`
                        <div className="fixed inset-0 bg-slate-900/95 z-[2001] flex flex-col items-center justify-center gap-8 p-10 animate-fade-up">
                            <button onClick=${() => setIsMenuOpen(false)} className="absolute top-8 right-8 text-white text-3xl focus:outline-none"><i className="fa-solid fa-times"></i></button>
                            <ul className="text-center space-y-6">
                                ${['Accueil', 'Formations', 'Mémoires', 'Actualités', 'Contact'].map(item => html`
                                    <li key=${item}><a href="#" className="text-white text-2xl font-black uppercase tracking-widest" onClick=${() => setIsMenuOpen(false)}>${item}</a></li>
                                `)}
                            </ul>
                        </div>
                    `}

                    <div className="mt-[70px] md:mt-[90px]">
                        <!-- Hero Section -->
                        <section className="relative py-12 md:py-32 px-6 bg-[#0f172a] text-center overflow-hidden">
                            <div className="absolute inset-0 pointer-events-none">
                                <div className="absolute top-0 right-0 w-[40rem] h-[40rem] bg-[#ffb606] opacity-[0.04] blur-[120px] rounded-full"></div>
                                <div className="absolute bottom-0 left-0 w-[30rem] h-[30rem] bg-blue-500 opacity-[0.02] blur-[100px] rounded-full"></div>
                            </div>
                            <div className="relative z-10 max-w-5xl mx-auto animate-fade-up">
                                <span className="inline-block px-5 py-2 rounded-full bg-white/5 border border-white/10 text-[#ffb606] font-black text-[9px] md:text-[10px] uppercase tracking-[0.3em] mb-6 md:mb-10">
                                    Communauté des Alumni Excellence
                                </span>
                                <h2 className="text-3xl md:text-7xl font-black text-white mb-6 md:mb-8 tracking-tighter leading-tight">
                                    L'Excellence de nos <br/> <span className="text-[#ffb606]">Diplômés</span>
                                </h2>
                                <p className="text-slate-400 text-base md:text-xl max-w-2xl mx-auto mb-10 md:mb-16 font-medium leading-relaxed">
                                    Découvrez les parcours inspirants et accédez aux contributions académiques et scientifiques de nos anciens étudiants.
                                </p>
                                <div className="flex flex-col sm:flex-row items-center justify-center gap-4 mb-12 md:mb-20">
                                    <button onClick=${() => document.getElementById('alumni-list').scrollIntoView({behavior:'smooth'})} className="w-full sm:w-auto px-10 py-5 bg-[#ffb606] text-white rounded-2xl font-black text-xs uppercase tracking-widest shadow-xl shadow-yellow-500/20 hover:scale-105 transition-all">
                                        Explorer les profils
                                    </button>
                                    <button onClick=${() => document.getElementById('testimonials-section').scrollIntoView({behavior:'smooth'})} className="btn-premium w-full sm:w-auto px-10 py-5 bg-white/5 border-2 border-[#ffb606]/30 text-white rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-[#ffb606] hover:text-slate-900 transition-all flex items-center justify-center gap-3">
                                        <i className="fa-solid fa-sparkles text-[#ffb606]"></i>
                                        Success Stories
                                    </button>
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 w-full">
                                    ${[
                                        { label: 'Diplômés Actifs', val: globalStats.totalAlumni, icon: 'fa-user-graduate', color: 'text-white' },
                                        { label: 'Travaux Archivés', val: globalStats.totalWorks, icon: 'fa-book-bookmark', color: 'text-[#ffb606]' },
                                        { label: 'Impact Digital', val: globalStats.totalDownloads, icon: 'fa-cloud-arrow-down', color: 'text-blue-400' }
                                    ].map((s, i) => html`
                                        <div key=${i} className="bg-white/5 backdrop-blur-xl border border-white/10 p-6 md:p-10 rounded-[2rem] hover:bg-white/10 transition-all text-center">
                                            <div className=${`text-3xl md:text-5xl font-black mb-1 ${s.color}`}>${s.val}</div>
                                            <div className="text-slate-500 font-black uppercase text-[9px] tracking-widest">${s.label}</div>
                                        </div>
                                    `)}
                                </div>
                            </div>
                        </section>

                        <!-- Search Section -->
                        <section id="alumni-list" className="sticky top-[70px] md:top-[90px] z-40 bg-white/95 backdrop-blur-md border-b border-slate-100 py-4 md:py-5 px-4">
                            <div className="max-w-7xl mx-auto flex flex-col md:flex-row gap-4">
                                <div className="relative group flex-1">
                                    <i className="fa-solid fa-search absolute left-6 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-[#ffb606] transition-colors"></i>
                                    <input 
                                        type="text" 
                                        placeholder="Rechercher par nom ou email..."
                                        className="w-full pl-14 pr-6 py-4 bg-slate-50 border-none rounded-2xl focus:bg-white focus:ring-4 focus:ring-[#ffb606]/10 transition-all font-bold text-slate-700 shadow-inner"
                                        value=${searchTerm}
                                        onChange=${(e) => setSearchTerm(e.target.value)}
                                    />
                                </div>
                                <button onClick=${() => window.location.reload()} className="bg-[#ffb606] text-white px-8 py-4 rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-lg shadow-yellow-500/10 active:scale-95 transition-transform">
                                    <i className="fa-solid fa-sync mr-2"></i> Actualiser
                                </button>
                            </div>
                        </section>

                        <!-- Alumni Grid -->
                        <main className="py-12 md:py-20 px-4 bg-slate-50/50 min-h-screen">
                            <div className="max-w-7xl mx-auto">
                                ${loading ? html`
                                    <div className="flex flex-col items-center py-32 gap-4">
                                        <div className="w-10 h-10 border-4 border-slate-100 border-t-[#ffb606] rounded-full animate-spin"></div>
                                        <p className="text-slate-400 font-black uppercase text-[9px] tracking-widest">Initialisation des profils...</p>
                                    </div>
                                ` : html`
                                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8">
                                        ${filteredAlumni.map((item, idx) => html`
                                            <div key=${item.utilisateur.id} className="alumni-card group bg-white rounded-[2.5rem] p-6 md:p-8 shadow-sm border border-slate-100 flex flex-col items-center text-center animate-fade-up" style=${{ animationDelay: `${idx * 0.05}s` }}>
                                                <div className="relative mb-6 md:mb-8">
                                                    <div className="absolute inset-0 bg-[#ffb606]/10 rounded-[2.5rem] blur-2xl scale-125 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                                    <img src=${item.utilisateur.photo_profil || `https://ui-avatars.com/api/?name=${item.utilisateur.nom}&background=f1f5f9&color=64748b&bold=true&size=128`} className="relative w-24 h-24 md:w-32 md:h-32 rounded-[2rem] md:rounded-[2.5rem] object-cover border-4 border-white shadow-xl transition-all duration-500 group-hover:scale-110" />
                                                </div>
                                                <div className="mb-6 md:mb-8 w-full px-2">
                                                    <h3 className="text-base md:text-xl font-black text-slate-800 uppercase tracking-tighter mb-1 truncate">${item.utilisateur.prenom} ${item.utilisateur.nom}</h3>
                                                    <p className="text-slate-400 text-[9px] font-bold uppercase tracking-widest opacity-60 truncate">${item.utilisateur.email}</p>
                                                </div>
                                                <div className="grid grid-cols-2 gap-3 w-full mb-8 md:mb-10">
                                                    <div className="bg-slate-50 p-4 rounded-3xl border border-transparent hover:border-slate-100 hover:bg-white transition-all">
                                                        <div className="text-lg md:text-xl font-black text-slate-800">${item.statistiques_globales?.total_memoires_lies || 0}</div>
                                                        <div className="text-[8px] font-black text-slate-400 uppercase tracking-widest">Travaux</div>
                                                    </div>
                                                    <div className="bg-slate-50 p-4 rounded-3xl border border-transparent hover:border-slate-100 hover:bg-white transition-all">
                                                        <div className="text-lg md:text-xl font-black text-pink-500">${item.statistiques_globales?.total_likes || 0}</div>
                                                        <div className="text-[8px] font-black text-slate-400 uppercase tracking-widest">Likes</div>
                                                    </div>
                                                </div>
                                                <button onClick=${() => setSelectedAlumnus(item)} className="w-full bg-slate-900 text-white py-4 md:py-5 rounded-2xl font-black text-[9px] uppercase tracking-widest hover:bg-[#ffb606] transition-all shadow-xl active:scale-95">
                                                    Détails complets
                                                </button>
                                            </div>
                                        `)}
                                    </div>
                                `}
                            </div>
                        </main>

                        <!-- TESTIMONIALS (Success Stories) - DEFINITIVE FIX -->
                        <section id="testimonials-section" className="py-20 md:py-32 bg-[#020617] relative overflow-hidden">
                            <div className="absolute top-10 right-0 p-10 opacity-5 pointer-events-none">
                                <i className="fa-solid fa-quote-right text-[10rem] md:text-[25rem] text-white"></i>
                            </div>

                            <div className="max-w-7xl mx-auto px-6 relative z-10">
                                <div className="text-center mb-10 md:mb-20">
                                    <span className="text-[#ffb606] font-black uppercase tracking-[0.4em] text-[10px] mb-4 block">Impact & Excellence</span>
                                    <h2 className="text-2xl md:text-5xl font-black text-white tracking-tighter uppercase leading-tight">Success Stories</h2>
                                    <div className="w-16 md:w-20 h-1.5 bg-gradient-to-r from-[#ffb606] to-yellow-300 mx-auto rounded-full mt-4"></div>
                                </div>

                                <div className="relative max-w-6xl mx-auto">
                                    <div className="relative overflow-hidden rounded-[2rem] md:rounded-[4rem] bg-[#0f172a] shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)] border border-white/5">
                                        <div className="testimonial-track" style=${{ transform: `translateX(-${carouselIndex * 100}%)`, width: `${(testimonials.length || 1) * 100}%` }}>
                                            ${testimonials.map(t => html`
                                                <div key=${t.id} className="testimonial-slide flex flex-col md:flex-row h-full min-h-[450px] md:min-h-[600px]">
                                                    {/* Image Container - Fixed height on mobile to prevent squashing */}
                                                    <div className="w-full md:w-[45%] h-[200px] md:h-auto relative overflow-hidden shrink-0">
                                                        <img src=${t.cover_url} className="absolute inset-0 w-full h-full object-cover ken-burns" />
                                                        <div className="absolute inset-0 bg-gradient-to-t md:bg-gradient-to-r from-[#020617] via-transparent to-transparent"></div>
                                                    </div>
                                                    {/* Content Container - Better typography & scroll safety */}
                                                    <div className="w-full md:w-[55%] p-6 md:p-16 lg:p-20 flex flex-col justify-center relative overflow-hidden">
                                                        <div className="absolute top-0 right-0 p-6 md:p-10 opacity-10">
                                                            <i className="fa-solid fa-quote-left text-5xl md:text-9xl text-[#ffb606]"></i>
                                                        </div>
                                                        <h3 className="text-lg md:text-3xl font-black text-white mb-3 md:mb-6 leading-tight tracking-tight uppercase relative z-10">
                                                            ${t.title}
                                                        </h3>
                                                        <div className="h-1 w-10 md:w-16 bg-[#ffb606]/40 mb-4 md:mb-10"></div>
                                                        
                                                        {/* Scrollable text area for long bodies on mobile */}
                                                        <div className="testimonial-body-scroll custom-scrollbar pr-2 mb-8 md:mb-14 relative z-10">
                                                            <p className="text-slate-300 text-sm md:text-lg italic leading-relaxed font-light">
                                                                "${t.body}"
                                                            </p>
                                                        </div>

                                                        <div className="flex items-center gap-4 mt-auto relative z-10 border-t border-white/5 pt-6">
                                                            <div className="w-10 h-10 md:w-16 md:h-16 rounded-xl md:rounded-2xl bg-gradient-to-br from-[#ffb606] to-yellow-600 flex items-center justify-center text-white font-black text-lg md:text-xl shadow-xl shadow-yellow-500/10 shrink-0">E</div>
                                                            <div className="flex flex-col">
                                                                <span className="text-white font-bold text-[10px] md:text-sm uppercase tracking-wider">Héritage ENSTP</span>
                                                                <span className="text-slate-500 text-[8px] md:text-[10px] font-black uppercase tracking-widest">Alumni Network</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            `)}
                                        </div>
                                    </div>

                                    <!-- Controls -->
                                    <div className="hidden md:block">
                                        <button onClick=${() => setCarouselIndex(prev => (prev - 1 + testimonials.length) % testimonials.length)} className="absolute top-1/2 left-[-30px] -translate-y-1/2 w-14 h-14 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-white hover:bg-[#ffb606] hover:text-slate-900 transition-all z-20 backdrop-blur-md focus:outline-none">
                                            <i className="fa-solid fa-chevron-left"></i>
                                        </button>
                                        <button onClick=${() => setCarouselIndex(prev => (prev + 1) % testimonials.length)} className="absolute top-1/2 right-[-30px] -translate-y-1/2 w-14 h-14 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-white hover:bg-[#ffb606] hover:text-slate-900 transition-all z-20 backdrop-blur-md focus:outline-none">
                                            <i className="fa-solid fa-chevron-right"></i>
                                        </button>
                                    </div>
                                    <div className="flex md:hidden justify-center gap-4 mt-8">
                                        <button onClick=${() => setCarouselIndex(prev => (prev - 1 + testimonials.length) % testimonials.length)} className="w-10 h-10 rounded-xl bg-slate-800 text-white flex items-center justify-center active:bg-[#ffb606] transition-colors"><i className="fa-solid fa-chevron-left"></i></button>
                                        <button onClick=${() => setCarouselIndex(prev => (prev + 1) % testimonials.length)} className="w-10 h-10 rounded-xl bg-slate-800 text-white flex items-center justify-center active:bg-[#ffb606] transition-colors"><i className="fa-solid fa-chevron-right"></i></button>
                                    </div>
                                </div>

                                <!-- Indicators -->
                                <div className="flex justify-center gap-2 mt-10 md:mt-20">
                                    ${testimonials.map((_, i) => html`
                                        <button key=${i} onClick=${() => setCarouselIndex(i)} className=${`h-1.5 transition-all duration-700 rounded-full ${i === carouselIndex ? 'w-10 md:w-20 bg-[#ffb606]' : 'w-4 md:w-6 bg-white/10'}`}></button>
                                    `)}
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- Footer -->
                    <footer className="bg-white py-12 md:py-20 border-t border-slate-100 text-center px-6">
                        <div className="max-w-7xl mx-auto">
                            <div className="w-10 h-10 bg-[#ffb606] rounded-xl flex items-center justify-center text-white font-black mx-auto mb-8 shadow-2xl shadow-yellow-100">E</div>
                            <h4 className="text-base font-black text-slate-900 uppercase tracking-tighter mb-4">Portail Alumni ENSTP</h4>
                            <p className="text-slate-400 text-[10px] md:text-sm max-w-sm mx-auto mb-10 md:mb-16 font-medium leading-relaxed">Engagés pour le rayonnement de l'école à travers la réussite de nos anciens diplômés.</p>
                            <div className="pt-10 border-t border-slate-50">
                                <p className="text-slate-400 text-[9px] font-black uppercase tracking-[0.4em]">© 2025 École Nationale Supérieure des Travaux Publics</p>
                            </div>
                        </div>
                    </footer>

                    <!-- PROFILE MODAL (FULL STATS + DOMAINS RESTORED) -->
                    ${selectedAlumnus && html`
                        <div className="fixed inset-0 z-[2002] flex items-center justify-center p-0 md:p-4 overflow-hidden">
                            <div className="absolute inset-0 bg-slate-900/80 backdrop-blur-md transition-opacity" onClick=${() => setSelectedAlumnus(null)}></div>
                            <div className="modal-content-wrapper relative bg-white w-full max-w-5xl rounded-none md:rounded-[3.5rem] shadow-2xl overflow-hidden flex flex-col h-full md:max-h-[94vh] animate-fade-up">
                                <!-- Mobile Drag Handle -->
                                <div className="md:hidden flex justify-center p-3 shrink-0"><div className="w-10 h-1 bg-slate-200 rounded-full"></div></div>
                                
                                <button onClick=${() => setSelectedAlumnus(null)} className="absolute top-3 right-3 md:top-8 md:right-8 w-8 h-8 md:w-14 md:h-14 rounded-lg md:rounded-2xl bg-slate-50 flex items-center justify-center hover:bg-red-50 hover:text-red-500 transition-all z-20 shadow-sm focus:outline-none">
                                    <i className="fa-solid fa-times text-sm md:text-xl"></i>
                                </button>
                                
                                <!-- Profile Header - Compact for Mobile -->
                                <div className="p-4 md:p-14 border-b border-slate-100 bg-slate-50/50 flex flex-col md:flex-row items-center gap-4 md:gap-12 shrink-0">
                                    <div className="relative shrink-0">
                                        <div className="absolute inset-0 bg-[#ffb606]/10 rounded-[1.5rem] md:rounded-[3.5rem] blur-xl scale-110 md:scale-125"></div>
                                        <img src=${selectedAlumnus.utilisateur.photo_profil || `https://ui-avatars.com/api/?name=${selectedAlumnus.utilisateur.nom}&background=ffb606&color=fff&bold=true&size=128`} className="relative w-20 h-20 md:w-44 md:h-44 rounded-[1.5rem] md:rounded-[4rem] object-cover shadow-2xl border-2 md:border-4 border-white" />
                                    </div>
                                    <div className="text-center md:text-left flex-grow min-w-0">
                                        <h3 className="text-xl md:text-4xl font-black text-slate-800 tracking-tighter uppercase mb-1 md:mb-3 leading-tight truncate">${selectedAlumnus.utilisateur.prenom} ${selectedAlumnus.utilisateur.nom}</h3>
                                        <p className="text-slate-400 font-bold mb-4 md:mb-8 text-[11px] md:text-xl truncate opacity-80 font-outfit">${selectedAlumnus.utilisateur.email}</p>
                                        <div className="flex flex-wrap justify-center md:justify-start gap-2 md:gap-3">
                                            ${selectedAlumnus.utilisateur.linkedin && html`
                                                <a href=${selectedAlumnus.utilisateur.linkedin} target="_blank" className="px-4 py-2 md:px-8 md:py-4 bg-blue-600 text-white rounded-xl md:rounded-2xl text-[8px] md:text-[10px] font-black uppercase tracking-widest hover:bg-blue-700 transition-all flex items-center gap-2 shadow-lg">
                                                    <i className="fa-brands fa-linkedin-in text-xs md:text-base"></i> LinkedIn
                                                </a>
                                            `}
                                            <div className="px-4 py-2 md:px-8 md:py-4 bg-white border border-slate-200 text-slate-600 rounded-xl md:rounded-2xl text-[8px] md:text-[10px] font-black uppercase tracking-widest flex items-center gap-2 shadow-sm">
                                                <i className="fa-solid fa-graduation-cap text-[#ffb606] text-xs md:text-base"></i> Score : ${selectedAlumnus.statistiques_globales.note_moyenne_globale.toFixed(1)}/5
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="p-4 md:p-14 overflow-y-auto custom-scrollbar flex-1 bg-white">
                                    <!-- Stats Grille - Compact Icons -->
                                    <div className="grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6 mb-10 md:mb-16">
                                        ${[
                                            { label: 'Auteur', val: selectedAlumnus.statistiques_globales.total_memoires_auteur, icon: 'fa-pen-nib', color: 'text-blue-500' },
                                            { label: 'Encadreur', val: selectedAlumnus.statistiques_globales.total_memoires_encadres, icon: 'fa-chalkboard-user', color: 'text-orange-500' },
                                            { label: 'Travaux', val: selectedAlumnus.statistiques_globales.total_memoires_lies, icon: 'fa-diagram-project', color: 'text-[#ffb606]' },
                                            { label: 'Consultations', val: selectedAlumnus.statistiques_globales.total_telechargements, icon: 'fa-cloud-arrow-down', color: 'text-blue-400' },
                                            { label: 'Likes', val: selectedAlumnus.statistiques_globales.total_likes, icon: 'fa-heart', color: 'text-pink-500' },
                                            { label: 'Comments', val: selectedAlumnus.statistiques_globales.total_commentaires, icon: 'fa-comments', color: 'text-indigo-400' },
                                            { label: 'Notations', val: selectedAlumnus.statistiques_globales.total_notations, icon: 'fa-star', color: 'text-yellow-400' },
                                            { label: 'Moyenne G.', val: selectedAlumnus.statistiques_globales.note_moyenne_globale.toFixed(1), icon: 'fa-chart-line', color: 'text-green-500' }
                                        ].map((s, i) => html`
                                            <div key=${i} className="bg-slate-50/80 p-4 md:p-8 rounded-2xl md:rounded-[2.5rem] border border-slate-100 text-center hover:bg-white transition-all group">
                                                <div className="flex justify-center mb-2 md:mb-3">
                                                    <i className=${`fa-solid ${s.icon} ${s.color} text-base md:text-xl`}></i>
                                                </div>
                                                <div className="text-lg md:text-2xl font-black text-slate-800 leading-none mb-1 font-outfit">${s.val}</div>
                                                <div className="text-[7px] md:text-[8px] font-black text-slate-400 uppercase tracking-widest">${s.label}</div>
                                            </div>
                                        `)}
                                    </div>

                                    <!-- Statistiques par Domaines - RESTORED -->
                                    ${selectedAlumnus.statistiques_par_domaine && selectedAlumnus.statistiques_par_domaine.length > 0 && html`
                                        <div className="mb-10 md:mb-16">
                                            <h4 className="text-[9px] md:text-[11px] font-black uppercase tracking-[0.5em] text-slate-400 mb-6 md:mb-8 flex items-center gap-4 md:gap-6">
                                                <span className="w-10 md:w-16 h-px bg-slate-200"></span> Domaines d'Expertise
                                            </h4>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-5">
                                                ${selectedAlumnus.statistiques_par_domaine.map((d, i) => html`
                                                    <div key=${i} className="bg-slate-50 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] border border-slate-100 flex justify-between items-center hover:bg-white hover:shadow-xl transition-all group">
                                                        <div className="font-black text-slate-800 uppercase text-xs md:text-sm tracking-tight group-hover:text-[#ffb606] transition-colors leading-tight min-w-0 pr-4">
                                                            ${d.domaine}
                                                        </div>
                                                        <div className="flex gap-4 md:gap-10 shrink-0">
                                                            <div className="text-center">
                                                                <div className="text-sm md:text-xl font-black font-outfit">${d.nb_memoires}</div>
                                                                <div className="text-[7px] md:text-[8px] uppercase font-black text-slate-400">Projets</div>
                                                            </div>
                                                            <div className="text-center">
                                                                <div className="text-sm md:text-xl font-black text-blue-500 font-outfit">${d.telechargements}</div>
                                                                <div className="text-[7px] md:text-[8px] uppercase font-black text-slate-400">Hits</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                `)}
                                            </div>
                                        </div>
                                    `}

                                    <!-- Academic Directory Section -->
                                    <h4 className="text-[9px] md:text-[11px] font-black uppercase tracking-[0.5em] text-slate-400 mb-6 md:mb-8 flex items-center gap-4 md:gap-6">
                                        <span className="w-10 md:w-16 h-px bg-slate-200"></span> Répertoire Académique
                                    </h4>
                                    <div className="space-y-4 md:space-y-6 pb-10">
                                        ${selectedAlumnus.memoires_details.map(m => html`
                                            <div key=${m.id} className="bg-slate-50/50 p-6 md:p-12 rounded-[2rem] md:rounded-[3rem] border border-slate-100 hover:bg-white hover:border-[#ffb606]/30 transition-all group">
                                                <div className="flex flex-col md:flex-row justify-between items-start gap-4 md:gap-6 mb-6 md:mb-8">
                                                    <div className="flex-grow min-w-0">
                                                        <h5 className="text-sm md:text-2xl font-black text-slate-800 group-hover:text-[#ffb606] transition-colors leading-tight uppercase tracking-tight mb-2 md:mb-4">${m.titre}</h5>
                                                        <div className="flex flex-wrap gap-2 md:gap-3">
                                                            <span className="px-3 py-1 rounded-full bg-slate-100 text-slate-500 text-[7px] md:text-[8px] font-bold uppercase tracking-widest">${m.role}</span>
                                                        </div>
                                                    </div>
                                                    <span className="bg-[#ffb606]/10 px-4 py-2 text-[9px] md:text-[11px] font-black text-[#ffb606] rounded-xl md:rounded-2xl border border-[#ffb606]/20 shadow-sm uppercase tracking-widest shrink-0 font-outfit">${m.annee}</span>
                                                </div>
                                                <div className="grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4 text-[9px] font-black uppercase tracking-[0.1em] text-slate-500">
                                                    <span className="flex items-center gap-2 bg-white px-4 py-2 rounded-xl border border-slate-100">
                                                        <i className="fa-solid fa-download text-blue-400 text-sm md:text-base"></i> ${m.nb_telechargements} Hits
                                                    </span>
                                                    <span className="flex items-center gap-2 bg-white px-4 py-2 rounded-xl border border-slate-100">
                                                        <i className="fa-solid fa-heart text-pink-500 text-sm md:text-base"></i> ${m.nb_likes} Likes
                                                    </span>
                                                    <span className="flex items-center gap-2 bg-white px-4 py-2 rounded-xl border border-slate-100 text-orange-600">
                                                        <i className="fa-solid fa-star text-yellow-400 text-sm md:text-base"></i> Note : ${m.note_moyenne.toFixed(1)} / 5
                                                    </span>
                                                </div>
                                            </div>
                                        `)}
                                    </div>
                                </div>
                                
                                <div className="p-6 md:p-12 bg-[#0f172a] flex flex-col md:flex-row items-center justify-between gap-4 md:gap-6 mt-auto shrink-0">
                                    <div className="hidden md:flex items-center gap-3">
                                        <div className="w-10 h-10 rounded-xl bg-[#ffb606] flex items-center justify-center text-white font-black">E</div>
                                        <span className="text-slate-500 text-[10px] font-black uppercase tracking-[0.5em]">Archives Digitales ENSTP Excellence</span>
                                    </div>
                                    <button onClick=${() => setSelectedAlumnus(null)} className="w-full md:w-auto bg-[#ffb606] text-white px-10 py-4 md:py-5 rounded-xl md:rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-yellow-500 transition-all shadow-xl active:scale-95 transition-transform">Fermer le profil</button>
                                </div>
                            </div>
                        </div>
                    `}
                </div>
            `;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>