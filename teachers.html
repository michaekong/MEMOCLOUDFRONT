<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portail des Lauréats - Excellence Polytechnique</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Outfit:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --enstp-gold: #ffb606;
            --enstp-dark: #020617;
            --enstp-pink: #f472b6;
            --enstp-blue: #3b82f6;
        }
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            scroll-behavior: smooth;
            overflow-x: hidden;
        }
        h1, h2, h3, h4, .font-outfit { font-family: 'Outfit', sans-serif; }
        
        .custom-scrollbar::-webkit-scrollbar { width: 4px; height: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: var(--enstp-gold); border-radius: 10px; }
        
        .mesh-gradient {
            background-color: #020617;
            background-image: 
                radial-gradient(at 0% 0%, rgba(255, 182, 6, 0.2) 0, transparent 60%), 
                radial-gradient(at 50% 0%, rgba(59, 130, 246, 0.15) 0, transparent 50%), 
                radial-gradient(at 100% 0%, rgba(244, 114, 182, 0.15) 0, transparent 50%);
            position: absolute;
            inset: 0;
            z-index: 0;
        }

        .glass-premium {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .glass-premium:hover {
            background: rgba(255, 255, 255, 0.06);
            transform: translateY(-8px);
            border-color: rgba(255, 182, 6, 0.4);
        }

        @keyframes fade-up {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-up { animation: fade-up 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }

        .promo-pill.active {
            background: var(--enstp-gold);
            color: white;
            box-shadow: 0 10px 25px rgba(255, 182, 6, 0.3);
            border-color: var(--enstp-gold);
        }

        .ken-burns { animation: ken-burns 30s ease-out infinite alternate; }
        @keyframes ken-burns {
            0% { transform: scale(1); }
            100% { transform: scale(1.2); }
        }

        .scroll-mask {
            mask-image: linear-gradient(to right, transparent, black 15%, black 85%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 15%, black 85%, transparent);
        }

        @media (max-width: 768px) {
            .modal-content-wrapper {
                border-radius: 2rem 2rem 0 0 !important;
                height: 98vh !important;
            }
        }

        .hero-title-shadow {
            text-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@19.0.0",
        "react-dom/client": "https://esm.sh/react-dom@19.0.0/client",
        "htm": "https://esm.sh/htm@3.1.1",
        "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
        "react/": "https://esm.sh/react@^19.2.3/"
      }
    }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect, useMemo } from 'react';
        import ReactDOM from 'react-dom/client';
        import htm from 'htm';

        const html = htm.bind(React.createElement);

        const ALUMNI_API = "https://mcb.reimca-app.com/api/memoires/universites/ecole-des-travaux/users-stats/";
        const TESTIMONIALS_API = "https://mcb.reimca-app.com/api/universites/universities/ecole-des-travaux/oldstudent/";

        const App = () => {
            const [alumni, setAlumni] = useState([]);
            const [testimonials, setTestimonials] = useState([]);
            const [loading, setLoading] = useState(true);
            const [searchTerm, setSearchTerm] = useState('');
            const [selectedAlumnus, setSelectedAlumnus] = useState(null);
            const [selectedPromotion, setSelectedPromotion] = useState('All');
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [carouselIndex, setCarouselIndex] = useState(0);

            useEffect(() => {
                const init = async () => {
                    setLoading(true);
                    try {
                        const [alumniRes, testRes] = await Promise.all([
                            fetch(ALUMNI_API).then(r => r.json()),
                            fetch(TESTIMONIALS_API).then(r => r.json())
                        ]);
                        setAlumni(alumniRes.utilisateurs_stats || []);
                        setTestimonials(testRes || []);
                    } catch (err) { console.error('API Error:', err); }
                    finally { setLoading(false); }
                };
                init();
            }, []);

            useEffect(() => {
                if (testimonials.length <= 1) return;
                const interval = setInterval(() => {
                    setCarouselIndex(prev => (prev + 1) % testimonials.length);
                }, 10000);
                return () => clearInterval(interval);
            }, [testimonials]);

            const alumniWithPromotions = useMemo(() => {
                return alumni.map(item => {
                    const years = item.memoires_details?.map(m => m.annee) || [];
                    const promoYear = years.length > 0 ? Math.min(...years) : null;
                    return { ...item, promoYear };
                });
            }, [alumni]);

            const promotionsList = useMemo(() => {
                const years = alumniWithPromotions
                    .map(a => a.promoYear)
                    .filter(y => y !== null);
                // Tri chronologique : de la plus vieille à la plus récente
                return ['All', ...new Set(years)].sort((a, b) => {
                    if (a === 'All') return -1;
                    if (b === 'All') return 1;
                    return a - b;
                });
            }, [alumniWithPromotions]);

            const filteredAlumni = useMemo(() => {
                const filtered = alumniWithPromotions.filter(item => {
                    const fullName = `${item.utilisateur.prenom} ${item.utilisateur.nom}`.toLowerCase();
                    const matchesSearch = fullName.includes(searchTerm.toLowerCase()) || 
                                       item.utilisateur.email.toLowerCase().includes(searchTerm.toLowerCase());
                    const matchesPromo = selectedPromotion === 'All' || item.promoYear === selectedPromotion;
                    return matchesSearch && matchesPromo;
                });
                
                // Tri des alumni par promotion (du passé vers le présent)
                return filtered.sort((a, b) => (a.promoYear || 0) - (b.promoYear || 0));
            }, [alumniWithPromotions, searchTerm, selectedPromotion]);

            const globalStats = useMemo(() => ({
                totalAlumni: alumni.length,
                totalWorks: alumni.reduce((acc, curr) => acc + (curr.statistiques_globales?.total_memoires_lies || 0), 0),
                totalPromotions: promotionsList.length - 1,
                totalDownloads: alumni.reduce((acc, curr) => acc + (curr.statistiques_globales?.total_telechargements || 0), 0)
            }), [alumni, promotionsList]);

            return html`
                <div className="min-h-screen flex flex-col bg-slate-50">
                    <!-- Navigation -->
                    <header className="fixed top-0 left-0 w-full h-[70px] md:h-[90px] bg-white/90 backdrop-blur-xl z-[1000] border-b border-slate-100 flex items-center justify-between px-4 md:px-12 shadow-sm transition-all duration-300">
                        <div className="flex items-center gap-6 md:gap-10">
                            <div className="h-[40px] md:h-[50px] hover:scale-105 transition-transform">
                                <img src="images/logo.png" alt="Logo" className="h-full object-contain" />
                            </div>
                            <nav className="hidden xl:block">
                                <ul className="flex items-center gap-10 font-bold text-[11px] uppercase tracking-[0.25em] text-slate-500">
                                    <li><a href="index.html" className="hover:text-[#ffb606] transition-colors relative group">Accueil<span className="absolute -bottom-1 left-0 w-0 h-0.5 bg-[#ffb606] transition-all group-hover:w-full"></span></a></li>
                                    <li><a href="#" className="hover:text-[#ffb606] transition-colors relative group">Formations<span className="absolute -bottom-1 left-0 w-0 h-0.5 bg-[#ffb606] transition-all group-hover:w-full"></span></a></li>
                                    <li><a href="#" className="text-[#ffb606] font-extrabold border-b-2 border-[#ffb606] pb-1">Lauréats</a></li>
                                    <li><a href="#" className="hover:text-[#ffb606] transition-colors relative group">Contact<span className="absolute -bottom-1 left-0 w-0 h-0.5 bg-[#ffb606] transition-all group-hover:w-full"></span></a></li>
                                </ul>
                            </nav>
                        </div>
                        <div className="flex items-center gap-4">
                            <div className="hidden lg:flex flex-col items-end mr-6">
                                <span className="text-[10px] font-black text-[#ffb606] uppercase tracking-widest leading-none">Centre d'Ingéniosité</span>
                                <span className="text-sm font-black text-slate-900 font-outfit tracking-tighter">(237) 222 23 09 44</span>
                            </div>
                            <button onClick=${() => setIsMenuOpen(true)} className="xl:hidden text-[#ffb606] text-2xl p-2"><i className="fa-solid fa-bars-staggered"></i></button>
                        </div>
                    </header>

                    <div className="mt-[70px] md:mt-[90px]">
                        <!-- Hero Section -->
                        <section className="relative pt-24 md:pt-48 pb-32 px-6 overflow-hidden bg-[#020617]">
                            <div className="mesh-gradient opacity-100"></div>
                            
                            <div className="relative z-10 max-w-7xl mx-auto">
                                <div className="text-center animate-fade-up mb-20 md:mb-32">
                                    <span className="inline-flex items-center gap-3 px-8 py-3 rounded-full bg-white/5 border border-white/10 text-[#ffb606] font-black text-[11px] uppercase tracking-[0.5em] mb-12 shadow-2xl backdrop-blur-md">
                                        L'Ingéniosité en Héritage
                                    </span>
                                    <h1 className="text-6xl md:text-[10rem] font-black text-white mb-12 tracking-tighter leading-[0.8] uppercase hero-title-shadow">
                                        Talents <br/> <span className="text-[#ffb606] italic">Pluriels</span>
                                    </h1>
                                    <p className="text-slate-300 text-xl md:text-3xl max-w-4xl mx-auto mb-20 font-medium leading-relaxed opacity-90 tracking-tight">
                                        Découvrez les parcours de nos anciens lauréats et diplômés dont les travaux témoignent d'une créativité sans frontières. 
                                        <span className="text-slate-500 block mt-6 italic font-normal text-lg md:text-xl">Un demi-siècle d'ingéniosité pluridisciplinaire au service de la complexité.</span>
                                    </p>
                                    
                                    <div className="flex flex-col sm:flex-row items-center justify-center gap-8">
                                        <button onClick=${() => document.getElementById('promo-grid').scrollIntoView({behavior:'smooth'})} className="px-12 py-6 bg-[#ffb606] text-white rounded-2xl font-black text-[12px] uppercase tracking-widest shadow-2xl shadow-yellow-500/40 hover:scale-105 active:scale-95 transition-all w-full sm:w-auto">
                                            Parcourir les Promotions
                                        </button>
                                        <button onClick=${() => document.getElementById('testimonials').scrollIntoView({behavior:'smooth'})} className="px-12 py-6 bg-white/5 border border-white/10 text-white rounded-2xl font-black text-[12px] uppercase tracking-widest hover:bg-white hover:text-slate-900 transition-all w-full sm:w-auto backdrop-blur-md">
                                            Histoires de Réussite
                                        </button>
                                    </div>
                                </div>

                                <!-- HERO STATS DASHBOARD -->
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-6 md:gap-10 animate-fade-up">
                                    ${[
                                        { label: 'Lauréats Actifs', val: globalStats.totalAlumni, icon: 'fa-user-graduate', color: 'text-white' },
                                        { label: 'Travaux Scientifiques', val: globalStats.totalWorks, icon: 'fa-lightbulb', color: 'text-[#ffb606]' },
                                        { label: 'promotions', val: globalStats.totalPromotions, icon: 'fa-timeline', color: 'text-blue-400' },
                                        { label: 'Impact Global', val: globalStats.totalDownloads, icon: 'fa-earth-africa', color: 'text-pink-500' }
                                    ].map((s, i) => html`
                                        <div key=${i} className="glass-premium p-10 md:p-14 rounded-[3.5rem] text-center group">
                                            <div className="mb-6 text-slate-500 group-hover:text-[#ffb606] transition-colors duration-500"><i className=${`fa-solid ${s.icon} text-2xl md:text-3xl`}></i></div>
                                            <div className=${`text-4xl md:text-6xl font-black mb-2 font-outfit tracking-tighter ${s.color}`}>${s.val.toLocaleString()}</div>
                                            <div className="text-slate-500 text-[11px] font-black uppercase tracking-[0.3em] opacity-80">${s.label}</div>
                                        </div>
                                    `)}
                                </div>
                            </div>
                        </section>

                        <!-- Enhanced Filter Section -->
                        <section id="promo-grid" className="sticky top-[70px] md:top-[90px] z-40 bg-white/95 backdrop-blur-2xl border-b border-slate-100 py-8 px-4 shadow-xl shadow-slate-200/20">
                            <div className="max-w-7xl mx-auto flex flex-col lg:flex-row items-center gap-8">
                                <div className="flex-1 w-full max-w-lg relative group">
                                    <i className="fa-solid fa-search absolute left-7 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-[#ffb606] transition-colors"></i>
                                    <input 
                                        type="text" 
                                        placeholder="Chercher un lauréat, un diplômé ou une année..."
                                        className="w-full pl-16 pr-8 py-5 bg-slate-50 border-none rounded-3xl focus:bg-white focus:ring-4 focus:ring-[#ffb606]/10 transition-all font-bold text-slate-700 text-base shadow-inner"
                                        value=${searchTerm}
                                        onChange=${(e) => setSearchTerm(e.target.value)}
                                    />
                                </div>
                                
                                <div className="flex-1 w-full relative">
                                    <div className="flex items-center gap-3 overflow-x-auto pb-4 scroll-smooth custom-scrollbar scroll-mask px-10">
                                        <span className="text-[11px] font-black text-slate-400 uppercase tracking-widest mr-6 shrink-0 hidden sm:block">Parcours Historique :</span>
                                        ${promotionsList.map(year => html`
                                            <button 
                                                key=${year}
                                                onClick=${() => setSelectedPromotion(year)}
                                                className=${`promo-pill px-8 py-4 rounded-2xl text-[11px] font-black uppercase tracking-widest transition-all shrink-0 border border-slate-100 shadow-sm ${selectedPromotion === year ? 'active' : 'bg-white text-slate-400 hover:border-[#ffb606] hover:text-[#ffb606]'}`}
                                            >
                                                ${year === 'All' ? 'Toutes les promos' : `Promotion ${year}`}
                                            </button>
                                        `)}
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Alumni Grid -->
                        <main className="py-24 px-4 bg-white min-h-screen">
                            <div className="max-w-7xl mx-auto">
                                ${loading ? html`
                                    <div className="flex flex-col items-center py-48 gap-8">
                                        <div className="w-16 h-16 border-[5px] border-slate-100 border-t-[#ffb606] rounded-full animate-spin"></div>
                                        <p className="text-slate-400 font-black uppercase text-[12px] tracking-[0.5em]">Accès aux archives lauréats...</p>
                                    </div>
                                ` : html`
                                    <div className="flex flex-col md:flex-row items-center justify-between mb-16 gap-4">
                                        <h3 className="text-slate-300 font-black uppercase tracking-[0.6em] text-[12px]">
                                            Archives des Diplômés <span className="text-[#ffb606]">(${filteredAlumni.length})</span>
                                        </h3>
                                        <div className="h-px bg-slate-100 flex-1 mx-10 hidden md:block opacity-50"></div>
                                        <span className="text-slate-400 font-bold text-[11px] uppercase tracking-widest bg-slate-50 px-6 py-2 rounded-full">Ordre chronologique ascendant</span>
                                    </div>
                                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10 md:gap-14">
                                        ${filteredAlumni.map((item, idx) => html`
                                            <div key=${item.utilisateur.id} className="alumni-card group bg-white rounded-[4rem] p-8 border border-slate-100 hover:shadow-2xl hover:shadow-yellow-500/10 transition-all duration-700 flex flex-col animate-fade-up relative overflow-hidden" style=${{ animationDelay: `${idx * 0.05}s` }}>
                                                
                                                <!-- Top Badge -->
                                                <div className="absolute top-6 left-6 z-10">
                                                    <span className="bg-white/95 backdrop-blur-md px-6 py-2.5 rounded-2xl text-[10px] font-black text-slate-900 uppercase tracking-widest shadow-sm border border-slate-100 group-hover:bg-[#ffb606] group-hover:text-white group-hover:border-[#ffb606] transition-all">
                                                        Diplômé ${item.promoYear || '---'}
                                                    </span>
                                                </div>

                                                <div className="relative mb-10">
                                                    <div className="absolute inset-0 bg-[#ffb606]/10 rounded-full blur-3xl scale-125 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                                    <img src=${item.utilisateur.photo_profil || `https://ui-avatars.com/api/?name=${item.utilisateur.nom}&background=f1f5f9&color=64748b&bold=true&size=512`} className="relative w-full aspect-square rounded-[3.5rem] object-cover border-4 border-white shadow-2xl transition-all duration-700 group-hover:scale-105 group-hover:-rotate-1" />
                                                </div>

                                                <div className="text-center mb-10">
                                                    <h3 className="text-2xl font-black text-slate-800 uppercase tracking-tighter mb-3 truncate group-hover:text-[#ffb606] transition-colors">${item.utilisateur.prenom} ${item.utilisateur.nom}</h3>
                                                    <p className="text-slate-400 font-bold text-[11px] uppercase tracking-widest opacity-60 truncate font-outfit">${item.utilisateur.email}</p>
                                                </div>

                                                <!-- Stats Panel -->
                                                <div className="grid grid-cols-3 gap-3 mb-10">
                                                    <div className="bg-slate-50 p-5 rounded-2xl text-center border border-transparent group-hover:border-slate-100 group-hover:bg-white transition-all">
                                                        <div className="text-2xl font-black text-slate-800 font-outfit">${item.statistiques_globales.total_memoires_lies}</div>
                                                        <div className="text-[8px] font-black text-slate-400 uppercase tracking-tighter">Travaux</div>
                                                    </div>
                                                    <div className="bg-slate-50 p-5 rounded-2xl text-center border border-transparent group-hover:border-slate-100 group-hover:bg-white transition-all">
                                                        <div className="text-2xl font-black text-[#f472b6] font-outfit">${item.statistiques_globales.total_likes}</div>
                                                        <div className="text-[8px] font-black text-slate-400 uppercase tracking-tighter">Soutiens</div>
                                                    </div>
                                                    <div className="bg-slate-50 p-5 rounded-2xl text-center border border-transparent group-hover:border-slate-100 group-hover:bg-white transition-all">
                                                        <div className="text-2xl font-black text-blue-500 font-outfit">${item.statistiques_globales.total_telechargements}</div>
                                                        <div className="text-[8px] font-black text-slate-400 uppercase tracking-tighter">Impact</div>
                                                    </div>
                                                </div>

                                                <!-- Performance Footer -->
                                                <div className="flex items-center justify-between px-6 mb-10 pt-6 border-t border-slate-50">
                                                    <div className="flex items-center gap-3">
                                                        <i className="fa-solid fa-award text-[#ffb606] text-[12px]"></i>
                                                        <span className="text-[12px] font-black text-slate-800 font-outfit">${item.statistiques_globales.note_moyenne_globale.toFixed(1)}/5</span>
                                                    </div>
                                                    <div className="flex items-center gap-3">
                                                        <i className="fa-solid fa-hand-holding-heart text-pink-300 text-[12px]"></i>
                                                        <span className="text-[12px] font-black text-slate-800 font-outfit">${item.statistiques_globales.total_commentaires}</span>
                                                    </div>
                                                </div>

                                                <button onClick=${() => setSelectedAlumnus(item)} className="w-full bg-slate-900 text-white py-6 rounded-3xl font-black text-[11px] uppercase tracking-widest hover:bg-[#ffb606] transition-all shadow-xl active:scale-95 group-hover:scale-[1.02]">
                                                    Découvrir le Parcours
                                                </button>
                                            </div>
                                        `)}
                                    </div>
                                `}
                            </div>
                        </main>

                        <!-- Testimonials -->
                        <section id="testimonials" className="py-32 md:py-56 bg-[#020617] relative overflow-hidden">
                            <div className="absolute top-0 right-0 p-10 opacity-5 pointer-events-none">
                                <i className="fa-solid fa-quote-right text-[20rem] md:text-[40rem] text-white"></i>
                            </div>

                            <div className="max-w-7xl mx-auto px-6 relative z-10">
                                <div className="text-center mb-24 md:mb-40">
                                    <span className="text-[#ffb606] font-black uppercase tracking-[0.6em] text-[12px] mb-8 block">Héritage d'Ingéniosité</span>
                                    <h2 className="text-5xl md:text-8xl font-black text-white tracking-tighter uppercase leading-tight">Portraits de Réussite</h2>
                                    <div className="w-32 h-2.5 bg-[#ffb606] mx-auto rounded-full mt-10 shadow-3xl shadow-yellow-500/30"></div>
                                </div>

                                <div className="relative max-w-6xl mx-auto">
                                    <div className="relative overflow-hidden rounded-[5rem] md:rounded-[7rem] bg-white/5 backdrop-blur-3xl border border-white/10 shadow-3xl">
                                        <div className="testimonial-track" style=${{ transform: `translateX(-${carouselIndex * 100}%)`, width: `${(testimonials.length || 1) * 100}%` }}>
                                            ${testimonials.map(t => html`
                                                <div key=${t.id} className="flex flex-col md:flex-row h-full min-h-[600px] md:min-h-[750px] w-full">
                                                    <div className="w-full md:w-[45%] h-[350px] md:h-auto relative overflow-hidden shrink-0">
                                                        <img src=${t.cover_url} className="absolute inset-0 w-full h-full object-cover ken-burns" />
                                                        <div className="absolute inset-0 bg-gradient-to-t md:bg-gradient-to-r from-[#020617] via-transparent to-transparent opacity-90"></div>
                                                    </div>
                                                    <div className="w-full md:w-[55%] p-14 md:p-32 flex flex-col justify-center relative">
                                                        <i className="fa-solid fa-quote-left text-[#ffb606]/10 text-8xl md:text-[12rem] absolute top-16 left-16"></i>
                                                        <h3 className="text-3xl md:text-6xl font-black text-white mb-10 tracking-tight uppercase leading-tight relative z-10">${t.title}</h3>
                                                        <p className="text-slate-300 text-xl md:text-3xl italic leading-relaxed font-light opacity-80 mb-16 relative z-10">"${t.body}"</p>
                                                        <div className="flex items-center gap-8 mt-auto pt-12 border-t border-white/5 relative z-10">
                                                            <div className="w-16 h-16 md:w-24 md:h-24 rounded-[2.5rem] bg-gradient-to-br from-[#ffb606] to-yellow-600 flex items-center justify-center text-white font-black text-3xl font-outfit shadow-2xl">E</div>
                                                            <div className="flex flex-col">
                                                                <span className="text-white font-bold text-sm md:text-base uppercase tracking-wider">Patrimoine Lauréat</span>
                                                                <span className="text-slate-600 text-[11px] font-black uppercase tracking-[0.2em]">Excellence Polytechnique</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            `)}
                                        </div>
                                    </div>
                                    
                                    <div className="flex justify-center gap-5 mt-20 md:mt-32">
                                        ${testimonials.map((_, i) => html`
                                            <button key=${i} onClick=${() => setCarouselIndex(i)} className=${`h-2.5 transition-all duration-700 rounded-full ${i === carouselIndex ? 'w-32 md:w-56 bg-[#ffb606] shadow-lg shadow-yellow-500/30' : 'w-8 md:w-14 bg-white/10 hover:bg-white/20'}`}></button>
                                        `)}
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- Enhanced Footer -->
                    <footer className="bg-white py-32 border-t border-slate-100 text-center px-6">
                        <div className="max-w-7xl mx-auto">
                            <div className="w-24 h-24 bg-[#ffb606] rounded-[3rem] flex items-center justify-center text-white font-black mx-auto mb-16 shadow-3xl shadow-yellow-200 text-4xl font-outfit">E</div>
                            <h4 className="text-3xl font-black text-slate-900 uppercase tracking-tighter mb-8">Héritage des Diplômés & Lauréats</h4>
                            <p className="text-slate-400 text-lg max-w-2xl mx-auto mb-24 font-medium leading-relaxed opacity-80">
                                Des promotions d'anciens lauréats dont l'ingéniosité pluridisciplinaire façonne l'avenir. 
                                Nous célébrons la complexité et l'excellence dans tous les domaines du savoir.
                            </p>
                            <div className="pt-20 border-t border-slate-50 flex flex-col md:flex-row items-center justify-between gap-10">
                                <p className="text-slate-400 text-[12px] font-black uppercase tracking-[0.5em]">© 2025 École Polytechnique - Portail d'Ingéniosité</p>
                                <div className="flex gap-12 text-slate-300">
                                    <i className="fa-brands fa-facebook-f hover:text-[#ffb606] cursor-pointer transition-colors text-xl"></i>
                                    <i className="fa-brands fa-linkedin-in hover:text-[#ffb606] cursor-pointer transition-colors text-xl"></i>
                                    <i className="fa-brands fa-x-twitter hover:text-[#ffb606] cursor-pointer transition-colors text-xl"></i>
                                </div>
                            </div>
                        </div>
                    </footer>

                    <!-- MODAL PROFILE -->
                    ${selectedAlumnus && html`
                        <div className="fixed inset-0 z-[2002] flex items-center justify-center p-0 md:p-4 overflow-hidden">
                            <div className="absolute inset-0 bg-slate-900/98 backdrop-blur-3xl transition-opacity" onClick=${() => setSelectedAlumnus(null)}></div>
                            
                            <div className="modal-content-wrapper relative bg-white w-full max-w-6xl rounded-none md:rounded-[5rem] shadow-3xl overflow-hidden flex flex-col h-full md:max-h-[96vh] animate-fade-up">
                                
                                <!-- Compact Profile Header Bar -->
                                <div className="modal-header-compact px-8 py-6 md:px-20 md:py-12 border-b border-slate-100 flex items-center justify-between shrink-0 bg-slate-50/30">
                                    <div className="flex items-center gap-8 md:gap-12">
                                        <div className="relative shrink-0">
                                            <img src=${selectedAlumnus.utilisateur.photo_profil || `https://ui-avatars.com/api/?name=${selectedAlumnus.utilisateur.nom}&background=ffb606&color=fff&bold=true&size=256`} className="w-20 h-20 md:w-36 md:h-36 rounded-[2.5rem] object-cover shadow-2xl border-4 border-white" />
                                            <div className="absolute -bottom-3 -right-3 bg-[#ffb606] text-white px-4 py-1.5 rounded-2xl text-[9px] md:text-[11px] font-black uppercase border-2 border-white shadow-xl">
                                                Diplômé ${selectedAlumnus.promoYear || '---'}
                                            </div>
                                        </div>
                                        <div className="min-w-0">
                                            <h3 className="text-2xl md:text-5xl font-black text-slate-800 tracking-tighter uppercase leading-tight truncate">
                                                ${selectedAlumnus.utilisateur.prenom} ${selectedAlumnus.utilisateur.nom}
                                            </h3>
                                            <div className="flex items-center gap-8 mt-3">
                                                <span className="text-[11px] md:text-[14px] font-bold text-slate-400 truncate opacity-80 font-outfit">${selectedAlumnus.utilisateur.email}</span>
                                                ${selectedAlumnus.utilisateur.linkedin && html`
                                                    <a href=${selectedAlumnus.utilisateur.linkedin} target="_blank" className="text-blue-600 text-lg md:text-2xl hover:scale-125 transition-transform">
                                                        <i className="fa-brands fa-linkedin"></i>
                                                    </a>
                                                `}
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <button onClick=${() => setSelectedAlumnus(null)} className="w-14 h-14 md:w-24 md:h-24 rounded-[2rem] bg-slate-100 text-slate-400 flex items-center justify-center hover:bg-red-50 hover:text-red-500 transition-all focus:outline-none shadow-sm">
                                        <i className="fa-solid fa-times text-xl md:text-3xl"></i>
                                    </button>
                                </div>

                                <div className="p-10 md:p-20 overflow-y-auto custom-scrollbar flex-1 bg-white">
                                    
                                    <!-- Statistics Matrix -->
                                    <div className="grid grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8 mb-20">
                                        ${[
                                            { label: 'Travaux Scientifiques', val: selectedAlumnus.statistiques_globales.total_memoires_auteur, icon: 'fa-microscope', color: 'text-blue-500' },
                                            { label: 'Ingéniosité Score', val: selectedAlumnus.statistiques_globales.note_moyenne_globale.toFixed(1), icon: 'fa-bolt', color: 'text-yellow-400' },
                                            { label: 'Rayonnement Impact', val: selectedAlumnus.statistiques_globales.total_telechargements, icon: 'fa-wifi', color: 'text-blue-400' },
                                            { label: 'Reconnaissance', val: selectedAlumnus.statistiques_globales.total_likes, icon: 'fa-heart', color: 'text-pink-500' },
                                            { label: 'Complexité Gérée', val: selectedAlumnus.statistiques_globales.total_memoires_encadres, icon: 'fa-gears', color: 'text-orange-500' },
                                            { label: 'Dialogues', val: selectedAlumnus.statistiques_globales.total_commentaires, icon: 'fa-comments', color: 'text-indigo-400' },
                                            { label: 'Évaluations', val: selectedAlumnus.statistiques_globales.total_notations, icon: 'fa-check-double', color: 'text-emerald-500' },
                                            { label: 'Portefeuille Global', val: selectedAlumnus.statistiques_globales.total_memoires_lies, icon: 'fa-folder-open', color: 'text-[#ffb606]' }
                                        ].map((s, i) => html`
                                            <div key=${i} className="bg-slate-50/80 p-8 md:p-10 rounded-[3rem] border border-slate-100 text-center transition-all group hover:bg-white hover:shadow-2xl">
                                                <i className=${`fa-solid ${s.icon} ${s.color} text-xl md:text-3xl mb-5 opacity-40`}></i>
                                                <div className="text-3xl md:text-5xl font-black text-slate-800 font-outfit leading-none mb-2">${s.val}</div>
                                                <div className="text-[9px] md:text-[11px] font-black text-slate-400 uppercase tracking-widest leading-tight opacity-70">${s.label}</div>
                                            </div>
                                        `)}
                                    </div>

                                    <!-- Content Split Layout -->
                                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-20">
                                        
                                        <!-- Expertises (4 columns) -->
                                        ${selectedAlumnus.statistiques_par_domaine && selectedAlumnus.statistiques_par_domaine.length > 0 && html`
                                            <div className="lg:col-span-4 space-y-12">
                                                <h4 className="text-[13px] font-black uppercase tracking-[0.7em] text-slate-300 flex items-center gap-8">
                                                    Savoir-Faire
                                                    <span className="flex-1 h-px bg-slate-100"></span>
                                                </h4>
                                                <div className="space-y-6">
                                                    ${selectedAlumnus.statistiques_par_domaine.map((d, i) => html`
                                                        <div key=${i} className="bg-slate-50 p-10 rounded-[3rem] border border-slate-100 flex flex-col gap-5 group hover:bg-white hover:border-[#ffb606]/30 transition-all shadow-sm">
                                                            <div className="font-black text-slate-800 uppercase text-sm leading-tight group-hover:text-[#ffb606] transition-colors">${d.domaine}</div>
                                                            <div className="flex justify-between items-center">
                                                                <span className="text-[11px] font-bold text-slate-400 uppercase tracking-widest">${d.nb_memoires} Travaux</span>
                                                                <span className="text-[11px] font-black text-blue-500 uppercase tracking-widest">${d.telechargements} Impact</span>
                                                            </div>
                                                            <div className="w-full h-2 bg-slate-100 rounded-full overflow-hidden shadow-inner">
                                                                <div className="h-full bg-gradient-to-r from-[#ffb606] to-yellow-400 transition-all duration-1000" style=${{width: `${Math.min(100, (d.nb_memoires / selectedAlumnus.statistiques_globales.total_memoires_lies) * 100)}%`}}></div>
                                                            </div>
                                                        </div>
                                                    `)}
                                                </div>
                                            </div>
                                        `}

                                        <!-- Repository (Full width or 8 columns) -->
                                        <div className=${selectedAlumnus.statistiques_par_domaine && selectedAlumnus.statistiques_par_domaine.length > 0 ? "lg:col-span-8 space-y-12" : "lg:col-span-12 space-y-12"}>
                                            <h4 className="text-[13px] font-black uppercase tracking-[0.7em] text-slate-300 flex items-center gap-8">
                                                Travaux de Recherche & Innovation
                                                <span className="flex-1 h-px bg-slate-100"></span>
                                            </h4>
                                            <div className="space-y-8">
                                                ${selectedAlumnus.memoires_details.map(m => html`
                                                    <div key=${m.id} className="bg-slate-50/50 p-12 md:p-16 rounded-[4rem] border border-slate-100 transition-all hover:bg-white hover:border-[#ffb606]/50 group relative overflow-hidden">
                                                        <div className="absolute top-0 right-0 p-12 opacity-5 group-hover:scale-150 transition-transform duration-1000"><i className="fa-solid fa-scroll text-9xl"></i></div>
                                                        <div className="flex flex-col md:flex-row justify-between items-start gap-10 mb-12 relative z-10">
                                                            <div className="flex-grow min-w-0">
                                                                <h5 className="text-xl md:text-3xl font-black text-slate-800 leading-tight uppercase tracking-tight mb-8 group-hover:text-[#ffb606] transition-colors">${m.titre}</h5>
                                                                <div className="flex flex-wrap gap-4">
                                                                    <span className="px-6 py-2.5 bg-slate-100 text-slate-500 text-[11px] font-black uppercase tracking-widest rounded-2xl">${m.role}</span>
                                                                </div>
                                                            </div>
                                                            <span className="bg-[#ffb606] px-10 py-4 text-[13px] font-black text-white rounded-2xl shadow-2xl shadow-yellow-500/30 uppercase tracking-widest font-outfit shrink-0">${m.annee}</span>
                                                        </div>
                                                        <div className="grid grid-cols-1 sm:grid-cols-3 gap-6 text-[12px] font-black uppercase tracking-[0.15em] text-slate-400 relative z-10">
                                                            <div className="flex items-center gap-5 bg-white px-10 py-6 rounded-[2rem] border border-slate-50 group-hover:shadow-xl transition-all">
                                                                <i className="fa-solid fa-eye text-blue-400 text-xl"></i> ${m.nb_telechargements} <span className="hidden xl:inline">Consultations</span>
                                                            </div>
                                                            <div className="flex items-center gap-5 bg-white px-10 py-6 rounded-[2rem] border border-slate-50 group-hover:shadow-xl transition-all">
                                                                <i className="fa-solid fa-award text-pink-500 text-xl"></i> ${m.nb_likes} <span className="hidden xl:inline">Soutiens</span>
                                                            </div>
                                                            <div className="flex items-center gap-5 bg-white px-10 py-6 rounded-[2rem] border border-slate-50 group-hover:shadow-xl transition-all text-[#ffb606]">
                                                                <i className="fa-solid fa-bolt-lightning text-xl"></i> Score : ${m.note_moyenne.toFixed(1)}/5
                                                            </div>
                                                        </div>
                                                    </div>
                                                `)}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="p-10 md:p-14 bg-[#020617] flex items-center justify-between shrink-0">
                                    <div className="flex items-center gap-8">
                                        <div className="w-16 h-16 rounded-[2.5rem] bg-[#ffb606] flex items-center justify-center text-white font-black text-3xl font-outfit shadow-2xl">E</div>
                                        <span className="text-slate-500 text-[11px] font-black uppercase tracking-[0.7em] hidden sm:block">Fierté Polytechnique - Patrimoine Scientifique des Lauréats</span>
                                    </div>
                                    <button onClick=${() => setSelectedAlumnus(null)} className="bg-[#ffb606] text-white px-14 py-6 rounded-2xl font-black text-[12px] uppercase tracking-widest hover:bg-yellow-500 transition-all shadow-3xl shadow-yellow-500/20 active:scale-95">Quitter les Archives</button>
                                </div>
                            </div>
                        </div>
                    `}
                </div>
            `;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>